<script>
  const loginBtn = document.getElementById('loginBtn');
  const loginModal = document.getElementById('loginModal');
  const closeModalBtn = document.getElementById('closeModalBtn');

  const loginOptionsDiv = document.getElementById('loginOptions');
  const loginFormDiv = document.getElementById('loginForm');
  const formTitle = document.getElementById('formTitle');
  const formLogin = document.getElementById('formLogin');
  const backBtn = document.getElementById('backBtn');

  let currentRole = null;

  loginBtn.addEventListener('click', () => {
    loginModal.style.display = 'block';
    showLoginOptions();
  });

  closeModalBtn.addEventListener('click', () => {
    loginModal.style.display = 'none';
    clearForm();
  });

  window.onclick = function(event) {
    if(event.target == loginModal) {
      loginModal.style.display = 'none';
      clearForm();
    }
  }

  // Tampilkan form login sesuai peran
  loginOptionsDiv.addEventListener('click', e => {
    if(e.target.classList.contains('login-option') && e.target.dataset.role) {
      currentRole = e.target.dataset.role;
      showLoginForm(currentRole);
    }
  });

  backBtn.addEventListener('click', () => {
    showLoginOptions();
    clearForm();
  });

  formLogin.addEventListener('submit', e => {
    e.preventDefault();
    const username = formLogin.username.value.trim();
    const password = formLogin.password.value.trim();

    if (username === '' || password === '') {
      alert('Username dan password harus diisi!');
      return;
    }

    // Login sederhana
    if (currentRole === 'admin' && username === 'admin' && password === 'admin123') {
      window.location.href = 'admin.html';
    } else if (currentRole === 'guru' && username === 'guru' && password === 'guru123') {
      window.location.href = 'guru.html';
    } else if (currentRole === 'siswa' && username === 'siswa' && password === 'siswa123') {
      window.location.href = 'siswa.html';
    } else {
      alert('Username atau password salah!');
    }
  });

  function showLoginOptions() {
    loginOptionsDiv.style.display = 'block';
    loginFormDiv.style.display = 'none';
  }

  function showLoginForm(role) {
    loginOptionsDiv.style.display = 'none';
    loginFormDiv.style.display = 'block';
    formTitle.textContent = `Login ${role.charAt(0).toUpperCase() + role.slice(1)}`;
  }

  function clearForm() {
    formLogin.username.value = '';
    formLogin.password.value = '';
    currentRole = null;
  }
</script>
